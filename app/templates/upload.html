<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"
          rel="stylesheet">
  </head>
    <title>Upload FV</title>

  <body>
    <div class="container">
       <a class="home" href ="{{url_for('index')}}"> Home</a>
      <div class="header">

        <h3 class="text-muted">Upload a File</h3>

      </div>
      <hr/>
      <div>
        <br>
      <form action="upload" method="post" enctype="multipart/form-data" onsubmit="return checkforum()">
        {{ form.hidden_tag() }}
        <div class="col-md-8">
    
        {{ form.Title.label }} 
        <br>
        {{ form.Title(id='title1', cols=40) }}
        <p id="p1">Enter a title</p>
        {% for message in form.Title.errors %} 
        <div class="alert alert-error"> 
          {{ message }} 
        </div> 
        {% endfor %}
        </div>
        <br>
                <div class="col-md-8">
        {{ form.Description.label }} 
        <br>
        {{ form.Description(rows=5, cols=40) }} 
        {% for message in form.Description.errors %} 
        <div class="alert alert-error"> 
          {{ message }} 
        </div> 
        {% endfor %}
        <p id="p2">Enter a Description</p>
        <br>

        <input type="file" id="file" name='file' onchange="startRead()"/>
            <p id="p3">Select a MP4 video file that is 50 MB or less<p>
        <input type="submit" value="Upload"/>
      </form>
      </div>
    </div></div>

    <script>
var max = 50000000;
var MB = 1000000;
function startRead(evt) {
    var file = document.getElementById('file').files[0];
    if (file) { 
         if (file.size > max){
          document.getElementById("p3").innerHTML = "Video is larger than 50 MB, This video is " + file.size/MB + " MB" ;}
         if (file.type.slice(-3) != "mp4") {
          document.getElementById("p3").innerHTML = "Video is not a supported format which is mp4";}
         if ((file.size  < max) && (file.type.slice(-3) == "mp4")){
            document.getElementById("p3").innerHTML = "";}
        } 
      }
function checkforum(){
      var file = document.getElementById('file').files[0];
      var a = document.getElementById("title1").value;
      if (file) {
        if ((file.size > max) || (file.type.slice(-3) != "mp4") || (a == "")){
          return false; }
        else { 
          return true;}}
      else {
        return (false); } 
 }     

     </script>
     <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-16808291-3', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
